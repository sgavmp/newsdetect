<!DOCTYPE html>
<html lang="es" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head th:include="base :: head">
</head>
<body>
	<div
		class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
		<header
			class="demo-header mdl-layout__header mdl-color--white mdl-color--grey-100 mdl-color-text--grey-600"
			th:replace="base :: menu-superior"> </header>
		<div
			class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-800 mdl-color-text--primary"
			th:include="base :: menu-izquierdo"></div>
		<main
			class="mdl-layout__content mdl-color--withe mdl-typography--text-center">
		<div class="doc-page mdl-grid">
			<div class="mdl-cell mdl-cell--2-col"></div>
			<div
				class="mdl-cell mdl-cell--8-col mdl-color--white mdl-shadow--2dp">
				<div
					class="mdl-cell mdl-cell--12-col mdl-cell--12-col-desktop mdl-typography--display-1-color-contrast"
					><span th:text="${queryform}">Probar query</span></div>
				<form action="#"
					th:action="@{/query}" method="post">

					<input type="hidden" th:name="${_csrf.parameterName}"
						th:value="${_csrf.token}" />
					<div
						class="mdl-cell mdl-cell--10-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<label class="mdl-textfield__label" for="query"><span th:text="${queryforminfo}">Introduce la query del topic</span></label>
						<textarea class="mdl-textfield__input" rows="6" type="text"
							name="query" id="query" th:inline="text">[[${query}]]</textarea>
					</div>
					
					<div>				
					<span th:text="${startdate}">Fecha De Inicio</span>: <input class="calendar" name="Des" id="Des" type="text"  th:value="${Des}"/> 
					&nbsp;&nbsp;
					<span th:text="${enddate}">Fecha de Fin</span>: <input class="calendar" name="Has" id="Has" type="text"  th:value="${Has}"/> 
					</div>
					<br/>
					<br/>
					<div>					
					<span th:text="${levelalertriskm}">Nivel de Alerta/Riesgo para la Query</span> <select name="AlertT" >
							<option value="" disabled="disabled" selected="selected"><span th:text="${selectlevelalertriskm}">Selecciona
								nivel de Alerta/Riesgo</span></option>
							<option
								th:each="code : ${T(es.ucm.visavet.gbf.app.domain.AlertLevel).values()}"
								th:value="${code}" th:text="${code}" th:selected="*{AlertT}==${code}"></option>
					</select>
					
					</div>


					<br/>
					<br/>	
					<div><h4><span th:text="${formulalucenecoord}">Formula Lucene "coord" </span></h4><span th:text="${defaultformulalucenecoord}">Default value for coord</span>
					<input th:if="${Coord} == true" class="defaultc mdl-switch__input" type="checkbox" name="Coord" onload="numericONOF()" onchange="numericONOF()" checked="checked"/>
					<input th:unless="${Coord} == true" class="defaultc mdl-switch__input" type="checkbox" name="Coord" onload="numericONOF()" onchange="numericONOF()" />
					</div>
					
					
					<div
						class="mdl-cell mdl-cell--10-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label" >
						<label class="mdl-textfield__label" for="formuLucCoord">
						<span th:text="${formulalucenecoordhelp}">Introduce Formula Lucene "coord" (Variables: coord->Valor original, overlap-> numero de terminos que aciertan  ,maxOverlap->numero de terminos en el documento)</span></label>
						<textarea class="mdl-textfield__input" rows="6" type="text"
							name="formuLucCoord" id="formuLucCoord" th:inline="text">[[${formuLucCoord}]]</textarea>
							<div class="mdl-tooltip" th:for="formuLucCoord" th:inline="text">
										<span th:text="${formulalucenecoordhelp}">Introduce Formula Lucene "coord" (Variables: coord->Valor original, overlap-> numero de terminos que aciertan  ,maxOverlap->numero de terminos en el documento)</span></div>
					</div>
					
					<br/>
					<br/>	
					<div><h4><span th:text="${formulalucenequerynorm}">Formula Lucene "QueryNorm"</span></h4>
					<span th:text="${defaultformulalucenequerynorm}">Default value for QueryNorm</span>
					<input th:if="${QueryNorm} == true" class="defaultc mdl-switch__input" type="checkbox" name="QueryNorm" onload="numericONOF()" onchange="numericONOF()" checked="checked"/>
					<input th:unless="${QueryNorm} == true" class="defaultc mdl-switch__input" type="checkbox" name="QueryNorm" onload="numericONOF()" onchange="numericONOF()" />
					<span th:text="${defaultformulalucenequerynormleng}">Apply norm length</span>
					<input th:if="${BasicNor} == true" class="defaultc mdl-switch__input" type="checkbox" name="BasicNor" onload="numericONOF()" onchange="numericONOF()" checked="checked"/>
					<input th:unless="${BasicNor} == true" class="defaultc mdl-switch__input" type="checkbox" name="BasicNor" onload="numericONOF()" onchange="numericONOF()" />
					<span th:text="${defaultformulalucenequerynormover}">DiscountOverlap</span>
					<input th:if="${DiscNor} == true" class="defaultc mdl-switch__input" type="checkbox" name="DiscNor"  onload="numericONOF()" onchange="numericONOF()" checked="checked"/>
					<input th:unless="${DiscNor} == true" class="defaultc mdl-switch__input" type="checkbox" name="DiscNor" onload="numericONOF()" onchange="numericONOF()" /></div>
					<div
						class="mdl-cell mdl-cell--10-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<label class="mdl-textfield__label" for="formuLucQueryNorm"><span th:text="${formulalucenequerynormhelp}">Introduce Formula Lucene "QueryNorm" (Variables: queryNorm->Valor original, sumOfSquaredWeights-> suma de los pesos de los terminos)</span></label>
						<textarea class="mdl-textfield__input" rows="6" type="text"
							name="formuLucQueryNorm" id="formuLucQueryNorm" th:inline="text">[[${formuLucQueryNorm}]]</textarea>
							<div class="mdl-tooltip" th:for="formuLucQueryNorm" th:inline="text">
										<span th:text="${formulalucenequerynormhelp}">Introduce Formula Lucene "QueryNorm" (Variables: queryNorm->Valor original, sumOfSquaredWeights-> suma de los pesos de los terminos)</span></div>
					</div>
					
					<br/>
					<br/>	
					<div><h4><span th:text="${formulalucenequerytf}">Formula Lucene "tf" </span></h4>
					<span th:text="${defaultformulalucenequerytf}">Default value for tf</span>
					<input th:if="${tf} == true" class="defaultc mdl-switch__input" type="checkbox" name="tf" onload="numericONOF()" onchange="numericONOF()" checked="checked"/>
					<input th:unless="${tf} == true" class="defaultc mdl-switch__input" type="checkbox" name="tf" onload="numericONOF()" onchange="numericONOF()" />
					</div>
					<div
						class="mdl-cell mdl-cell--10-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<label class="mdl-textfield__label" for="formuLuctf"><span th:text="${formulalucenequerytfhelp}">Introduce Formula Lucene "tf" (Variables: tf->Valor original, freq-> frecuencia de un termino dentro de un documento)</span></label>
						<textarea class="mdl-textfield__input" rows="6" type="text"
							name="formuLuctf" id="formuLuctf" th:inline="text">[[${formuLuctf}]]</textarea>
														<div class="mdl-tooltip" th:for="formuLuctf" th:inline="text">
										<span th:text="${formulalucenequerytfhelp}">Introduce Formula Lucene "tf" (Variables: tf->Valor original, freq-> frecuencia de un termino dentro de un documento)</span></div>
					</div>
					
					<br/>
					<br/>	
					<div><h4><span th:text="${formulalucenequeryidf}">Formula Lucene "idf" </span></h4>
					<span th:text="${defaultformulalucenequeryidf}">Default value for idf</span>
					<input th:if="${idf} == true" class="defaultc mdl-switch__input" type="checkbox" name="idf" onload="numericONOF()" onchange="numericONOF()" checked="checked"/>
					<input th:unless="${idf} == true" class="defaultc mdl-switch__input" type="checkbox" name="idf" onload="numericONOF()" onchange="numericONOF()"/>
					</div>
					<div
						class="mdl-cell mdl-cell--10-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<label class="mdl-textfield__label" for="formuLucidf"><span th:text="${formulalucenequeryidfhelp}">Introduce Formula Lucene "idf" (Variables: idf->Valor original, docFreq -> Numero de elementoc con este termino, numDocs -> numero de documentos total )</span></label>
						<textarea class="mdl-textfield__input" rows="6" type="text"
							name="formuLucidf" id="formuLucidf" th:inline="text">[[${formuLucidf}]]</textarea>
							<div class="mdl-tooltip" th:for="formuLucidf" th:inline="text">
										<span th:text="${formulalucenequeryidfhelp}">Introduce Formula Lucene "idf" (Variables: idf->Valor original, docFreq -> Numero de elementoc con este termino, numDocs -> numero de documentos total )</span></div>
					</div>



					<br/>
					<br/>
					<h4><span th:text="${formulalucenequerygeneral}">Formula General</span></h4>
					<div
						class="mdl-cell mdl-cell--10-col mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<label class="mdl-textfield__label" for="formuGen">
						<span th:text="${formulalucenequerygeneralhelp}">Introduce Formula General (Variables: Sl->Score Lucene, Wa->Peso alerta, Wl->Peso de localizacion Maximo, Ws->Peso del Proveedor)</span></label>
						<textarea class="mdl-textfield__input" rows="6" type="text"
							name="formuGen" id="formuGen" th:inline="text">[[${formuGen}]]</textarea>
							<div class="mdl-tooltip" th:for="formuGen" th:inline="text">
										<span th:text="${formulalucenequerygeneralhelp}">Introduce Formula General (Variables: Sl->Score Lucene, Wa->Peso alerta, Wl->Peso de localizacion Maximo, Ws->Peso del Proveedor)</span></div>
					</div>
					

					<input type="checkbox" id="persist" name="persist" style="display:none" /> 
					
					<br/>
					<br/>
					<div class="mdl-grid">
						<div class="mdl-cell mdl-cell--1-col"></div>
						<div class="mdl-cell mdl-cell--10-col">
							<button class="mdl-button mdl-js-button mdl-color--primary"
								type="submit" ><span th:text="${formulalucenequeryenviar}">Enviar</span></button>
							<button class="mdl-button mdl-js-button mdl-color--primary"
								type="submit" onclick="checkAddress()"><span th:text="${formulalucenequerypersist}">Persistir</span></button>
							<a class="mdl-button mdl-js-button"
								th:href="@{/}" href="#"><span th:text="${formulalucenequerycancelar}">Cancelar</span></a>
						</div>
					</div>
				</form>
			</div>
		</div>
		<div class="doc-page">
			<div class="snippet-padding"></div>
			<table
				class="mdl-data-table mdl-js-data-table snippet">
				<thead>
					<tr>
						<th class="mdl-data-table__cell--non-numeric"><span th:text="${querytittle}">Titulo</span></th>
						<th class="mdl-data-table__cell--non-numeric"><span th:text="${querysite}">Sitio</span></th>
						<th class="mdl-data-table__cell--non-numeric"><span th:text="${querydateofpubli}">Fecha de publicacion</span></th>
						<th><span th:text="${queryscore}">Score</span></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="news : ${result}">
						<td class="mdl-data-table__cell--non-numeric"
							th:inline="text"><a style="white-space: pre-line;" th:href="${news.link}">[[${news.title}]]</a></td>
						<td class="mdl-data-table__cell--non-numeric"
							th:inline="text"><p style="white-space: pre-line;">[[${news.site.name}]]</p></td>
						<td class="mdl-data-table__cell--non-numeric"
							th:inline="text">[[${#dates.format(news.datePub, 'dd/MM/yyyy')}]]</td>
						<td
							th:inline="text">[[${news.score}]]</td>
					</tr>
				</tbody>
			</table>
			<div class="snippet-padding"></div>
		</div>
		</main>
		<footer th:include="base :: footer"> </footer>
		<script th:inline="javascript">
		/*<![CDATA[*/
$(function () {
$.datepicker.setDefaults($.datepicker.regional["es"]);
$(".calendar").datepicker({
	closeText: /*[[${querycerrar}]]*/ 'close',
	prevText: /*[[${queryprev}]]*/ 'next',
	nextText: /*[[${querysig}]]*/ 'prev' ,
	currentText: /*[[${queryhoy}]]*/ 'hoy',
	monthNames: /*[[${querymonthcompl}]]*/ '[ "Enero","Febrero","Marzo","Abril","Mayo","Junio",	"Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre" ]',
	monthNamesShort: /*[[${querymonthrec}]]*/ '[ "ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic" ]',
	dayNames: /*[[${querydaycomp}]]*/ '[ "domingo","lunes","martes","miércoles","jueves","viernes","sábado" ]',
	dayNamesShort: /*[[${querydayrec}]]*/ '[ "dom","lun","mar","mié","jue","vie","sáb" ]',
	dayNamesMin: /*[[${querydayone}]]*/ '[ "D","L","M","X","J","V","S" ]',
	weekHeader: "Sm",
	dateFormat: "dd/mm/yy",
	firstDay: 1,
	isRTL: false,
	showMonthAfterYear: false,
	yearSuffix: ""
});
});
/*]]>*/
</script>

<script>
//<![CDATA[
$(function () {
	var classN=document.getElementsByClassName("defaultc");
 	
 	var i;
 	for (i = 0; i < classN.length; i++) {
		var name=classN[i].name;
		if (classN[i].checked) {
	        document.getElementById('formuLuc'.concat(name)).readOnly = true;
	        document.getElementById('formuLuc'.concat(name)).disabled=true;
	    } else {
	    	document.getElementById('formuLuc'.concat(name)).readOnly = false;
	    	document.getElementById('formuLuc'.concat(name)).disabled=false;
	    }
	} 
});
//]]>
</script>

<script>
//<![CDATA[
function checkAddress()
{
    var chkBox = document.getElementById('persist');
    chkBox.checked=true;
}
//]]>
</script>


<script type="text/javascript">
//<![CDATA[


 function numericONOF() {
	
	
	 	var classN=document.getElementsByClassName("defaultc");
	 	
	 	var i;
	 	for (i = 0; i < classN.length; i++) {
			var name=classN[i].name;
			if (classN[i].checked) {
		        document.getElementById('formuLuc'.concat(name)).readOnly = true;
		        document.getElementById('formuLuc'.concat(name)).disabled=true;
		    } else {
		    	document.getElementById('formuLuc'.concat(name)).readOnly = false;
		    	document.getElementById('formuLuc'.concat(name)).disabled=false;
		    }
		} 

};
//]]>
</script> 


	</div>
</body>
</html>
